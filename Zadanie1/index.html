<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

  <title>Listing + details!</title>
</head>

<body>

  <div>
    <div class="container">

      <header>
        <h1>Lista losowych ludzi</h1>
        <p>Chciałbym zaprezentować komponent "list-group" z wykorzystaniem Twitter Bootstrap</p>

      </header>
      <a target="_blank" rel="noopener noreferrer" href="details.html">Link</a>
      <div class="list-group">
        <a class="list-group-item list-group-item-action flex-column align-items-start" data-toggle="modal"
          data-target="#detailsModalCenter" data-firstname="Jan" data-surname="Kowalski" data-city="Warszawa" data-postcode="00-000"
          data-address="Hoża 20">
          <h4>Jan Kowalski</h4>
          <div class="row">
            <div class="col-sm-12 col-md-4">
              <h6>Miasto: Warszawa</h6>
            </div>
            <div class="col-sm-12 col-md-4">
              <h6>Kod pocztowy: 00-000</h6>
            </div>
            <div class="col-sm-12 col-md-4">
              <h6>Ulica: Hoża 20</h6>
            </div>
          </div>
          <p class="mb-1">Doktor medycyny. Miłośnik sportów ekstremalnych.</p>
        </a>
        <a href="#!" class="list-group-item list-group-item-action flex-column align-items-start" data-toggle="modal"
          data-target="#detailsModalCenter" data-firstname="Mirosław" data-surname="Agawski" data-city="Szczecin" data-postcode="10-020"
          data-address="Trybunalska 31">
          <h4>Mirosław Agawski</h4>
          <div class="row">
            <div class="col-sm-12 col-md-4">
              <h6>Miasto: Szczecin</h6>
            </div>
            <div class="col-sm-12 col-md-4">
              <h6>Kod pocztowy: 10-020</h6>
            </div>
            <div class="col-sm-12 col-md-4">
              <h6>Ulica: Trybunalska 31</h6>
            </div>
          </div>
          <p class="mb-1">Mechanik. Fanatyk jazdy na motocyklu.</p>
        </a>
        <a href="#!" class="list-group-item list-group-item-action flex-column align-items-start" data-toggle="modal"
          data-target="#detailsModalCenter" data-firstname="Tomasz" data-surname="Król" data-city="Gdańsk" data-postcode="11-022"
          data-address="Główna 1">
          <h4>Tomasz Król</h4>
          <div class="row">
            <div class="col-sm-12 col-md-4">
              <h6>Miasto: Gdańsk</h6>
            </div>
            <div class="col-sm-12 col-md-4">
              <h6>Kod pocztowy: 11-022</h6>
            </div>
            <div class="col-sm-12 col-md-4">
              <h6>Ulica: Główna 1</h6>
            </div>
          </div>
          <p class="mb-1">Programista.</p>
        </a>
      </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="detailsModalCenter" tabindex="-1" role="dialog" aria-labelledby="detailsModalCenterTitle"
      aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title" id="detailsModalCenterTitle">Szczegóły</h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="row">
              <div class="col-sm-12">
                <h7 id="city">Miasto: </h7>
              </div>
              <div class="col-sm-12">
                <h7 id="postcode">Kod pocztowy: </h7>
              </div>
              <div class="col-sm-12">
                <h7 id="address">Ulica: </h7>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"
      integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"
      integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>

    <script>
      $('#detailsModalCenter').on('show.bs.modal', function (event) {
        var listGroupItem = $(event.relatedTarget)
        var firstname = listGroupItem.data('firstname')
        var surname = listGroupItem.data('surname')
        var city = listGroupItem.data('city')
        var postcode = listGroupItem.data('postcode')
        var address = listGroupItem.data('address')
        var modal = $(this)

        modal.find('.modal-title').text("Szczegóły " + firstname + " " + surname);
        modal.find(".modal-body #city").text("Miasto: " + city);
        modal.find(".modal-body #postcode").text("Kod pocztowy: " + postcode);
        modal.find(".modal-body #address").text("Ulica: " + address);
      })


      $.ajax({
        url: "http://tin.pl:3000/person",
        method: "get",
        dataType: "jsonp",
      }).done(function (res) {
        console.log(res); //dostaliśmy odpowiedź z serwera, wypisujemy ją

        res.data.forEach(function (person) {
          console.log(person);
          $('.list-group').append("<a class='list-group-item list-group-item-action flex-column align-items-start' data-toggle='modal' data-target='#detailsModalCenter' data-firstname='Jan' data-surname='Kowalski' data-city='Warszawa' data-postcode='00-000' data-address='Hoża 20'><h4>" + person.firstname + " " + person.surname + "</h4><div class='row'><div class='col-sm-12 col-md-4'><h6>Miasto: " + person.city + "</h6></div><div class='col-sm-12 col-md-4'><h6>Kod pocztowy: " + person.postcode + "</h6></div><div class='col-sm-12 col-md-4'><h6>Ulica: " + person.address + "</h6></div></div><p class='mb-1'>" + person.description + "</p>  </a>");
          //   <a class="list-group-item list-group-item-action flex-column align-items-start" data-toggle="modal"
          //   data-target="#detailsModalCenter" data-firstname="Jan" data-surname="Kowalski" data-city="Warszawa" data-postcode="00-000"
          //   data-address="Hoża 20">
          //   <h4>Jan Kowalski</h4>
          //   <div class="row">
          //     <div class="col-sm-12 col-md-4">
          //       <h6>Miasto: Warszawa</h6>
          //     </div>
          //     <div class="col-sm-12 col-md-4">
          //       <h6>Kod pocztowy: 00-000</h6>
          //     </div>
          //     <div class="col-sm-12 col-md-4">
          //       <h6>Ulica: Hoża 20</h6>
          //     </div>
          //   </div>
          //   <p class="mb-1">Doktor medycyny. Miłośnik sportów ekstremalnych.</p>
          // </a>
        });
      })
    </script>
</body>

</html>